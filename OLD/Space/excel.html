<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Shooter</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <style>
        #gameArea {
            position: relative;
            background: black;
            height: 400px;
            border: 2px solid white;
            overflow: hidden;
        }
        
        .spaceship,
        .bullet,
        .answerBrick {
            position: absolute;
        }
        
        .spaceship {
            width: 30px;
            height: 30px;
            background: blue;
            bottom: 10px;
        }
        
        .bullet {
            width: 5px;
            height: 15px;
            background: yellow;
        }
        
        .answerBrick {
            width: 80px;
            height: 30px;
            background: green;
            text-align: center;
            color: white;
            line-height: 30px;
            font-weight: bold;
        }
        
        .questionBlock {
            position: absolute;
            top: 180px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="app" class="container mt-3">
        <div class="row mb-2">
            <div class="col">
                <h4>Score: {{ score }}</h4>
                <h5>Fire Rate: {{ fireRate }} ms</h5>
            </div>
        </div>

        <div id="gameArea" tabindex="0" @keydown.left.prevent="moveLeft" @keydown.right.prevent="moveRight" @keydown.space.prevent="shoot">
            <div class="spaceship" :style="{ left: spaceship.x + 'px' }"></div>

            <!-- Question Block -->
            <div class="questionBlock">{{ currentQuestion.question }}</div>

            <!-- Answer Bricks -->
            <div v-for="(brick, index) in answerBricks" class="answerBrick" :style="{ left: brick.x + 'px', top: brick.y + 'px' }">
                {{ brick.text }}
            </div>

            <!-- Bullets -->
            <div v-for="bullet in bullets" class="bullet" :style="{ left: bullet.x + 'px', top: bullet.y + 'px' }"></div>
        </div>

        <div class="row mt-2">
            <div class="col-4">
                <button class="btn btn-primary w-100" @click="moveLeft">Left</button>
            </div>
            <div class="col-4">
                <button class="btn btn-warning w-100" @click="shoot">Shoot</button>
            </div>
            <div class="col-4">
                <button class="btn btn-primary w-100" @click="moveRight">Right</button>
            </div>
        </div>
    </div>

    <script>
        new Vue({
            el: "#app",
            data: {
                score: 0,
                fireRate: 300, // ms between shots
                spaceship: {
                    x: 185
                },
                bullets: [],
                answerBricks: [],
                gameWidth: 400,
                gameHeight: 400,
                questions: [{
                    question: "2 + 2 = ?",
                    answers: ["3", "4", "5"],
                    correct: "4"
                }, {
                    question: "Capital of France?",
                    answers: ["London", "Paris", "Berlin"],
                    correct: "Paris"
                }, {
                    question: "5 * 2 = ?",
                    answers: ["10", "12", "8"],
                    correct: "10"
                }],
                currentQuestionIndex: 0
            },
            computed: {
                currentQuestion() {
                    return this.questions[this.currentQuestionIndex];
                }
            },
            mounted() {
                this.spawnAnswers();
                setInterval(this.updateGame, 30);
                document.getElementById('gameArea').focus();
            },
            methods: {
                moveLeft() {
                    if (this.spaceship.x > 0) this.spaceship.x -= 10;
                },
                moveRight() {
                    if (this.spaceship.x < this.gameWidth - 30) this.spaceship.x += 10;
                },
                shoot() {
                    this.bullets.push({
                        x: this.spaceship.x + 12,
                        y: 380
                    });
                },
                spawnAnswers() {
                    this.answerBricks = this.currentQuestion.answers.map((a, i) => ({
                        text: a,
                        x: i * 120 + 40,
                        y: 0
                    }));
                },
                nextQuestion() {
                    this.currentQuestionIndex = (this.currentQuestionIndex + 1) % this.questions.length;
                    this.spawnAnswers();
                },
                updateGame() {
                    // Move bullets
                    this.bullets.forEach((b, bi) => {
                        b.y -= 5;
                        if (b.y < 0) this.bullets.splice(bi, 1);
                    });

                    // Move bricks down
                    this.answerBricks.forEach(brick => brick.y += 0.5);

                    // Collision detection
                    this.bullets.forEach((b, bi) => {
                        this.answerBricks.forEach((brick, ai) => {
                            if (b.x + 5 > brick.x && b.x < brick.x + 80 && b.y < brick.y + 30 && b.y + 15 > brick.y) {
                                if (brick.text === this.currentQuestion.correct) {
                                    this.score += 10;
                                    this.fireRate = Math.max(100, this.fireRate - 20); // increase fire rate
                                } else {
                                    this.score = Math.max(0, this.score - 5); // penalty
                                }
                                this.bullets.splice(bi, 1);
                                this.nextQuestion();
                            }
                        });
                    });
                }
            }
        });
    </script>
</body>

</html>